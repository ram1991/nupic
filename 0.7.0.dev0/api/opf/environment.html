<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Environments &#8212; NuPIC 0.7.0.dev0
 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.7.0.dev0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Metrics" href="metrics.html" />
    <link rel="prev" title="Experiment Runner" href="exp-runner.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="environments">
<h1>Environments<a class="headerlink" href="#environments" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-nupic.frameworks.opf.opf_task_driver">
<span id="opf-task-driver"></span><h2>OPF Task Driver<a class="headerlink" href="#module-nupic.frameworks.opf.opf_task_driver" title="Permalink to this headline">¶</a></h2>
<p>This script is part of the Online Prediction Framework (OPF) suite.
It implements the TaskDriver for an OPF experiment.</p>
<p>It&#8217;s used by OPF RunExperiment and may also be useful for swarming&#8217;s
HyperSearch Worker</p>
<p>The TaskDriver is a simple state machine that:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Accepts incoming records from the client one data row at a time.</li>
<li>Cycles through phases in the requested iteration cycle; the phases may
include any combination of learnOnly, inferOnly, and learnAndInfer.</li>
<li>For each data row, generates an OPF Model workflow that corresponds to
the current phase in the iteration cycle and the requested inference types.</li>
<li>Emits inference results via user-supplied PredictionLogger</li>
<li>Gathers requested inference metrics.</li>
<li>Invokes user-proved callbaks (setup, postIter, finish)</li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the purposes of testing predictions and generating metrics, it
assumes that all incoming dataset records are &#8220;sensor data&#8221; - i.e., ground
truth. However, if you&#8217;re using OPFTaskDriver only to generate predictions,
and not for testing predictions/generating metrics, they don&#8217;t need to be
&#8220;ground truth&#8221; records.</p>
</div>
<dl class="class">
<dt id="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_task_driver.</code><code class="descname">OPFTaskDriver</code><span class="sig-paren">(</span><em>taskControl</em>, <em>model</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver" title="Permalink to this definition">¶</a></dt>
<dd><p>Task Phase Driver implementation</p>
<p>Conceptually, the client injects input records, one at a time, into
an OPFTaskDriver instance for execution according to the
current IterationPhase as maintained by the OPFTaskDriver instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>taskControl</strong> &#8211; (dict) conforming to opfTaskControlSchema.json that
defines the actions to be performed on the given model.</li>
<li><strong>model</strong> &#8211; (<a class="reference internal" href="models.html#nupic.frameworks.opf.model.Model" title="nupic.frameworks.opf.model.Model"><code class="xref py py-class docutils literal"><span class="pre">nupic.frameworks.opf.model.Model</span></code></a>) that this
OPFTaskDriver instance will drive.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform final activities, including &#8216;finish&#8217; callbacks. This
method MUST be called once after the last call to <a class="reference internal" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord" title="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord"><code class="xref py py-meth docutils literal"><span class="pre">handleInputRecord()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetricLabels">
<code class="descname">getMetricLabels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetricLabels" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(list) labels for the metrics that are being calculated</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetrics">
<code class="descname">getMetrics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the current metric values</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary of metric values. The key for each entry is the label
for the metric spec, as generated by
<a class="reference internal" href="metrics.html#nupic.frameworks.opf.metrics.MetricSpec.getLabel" title="nupic.frameworks.opf.metrics.MetricSpec.getLabel"><code class="xref py py-meth docutils literal"><span class="pre">nupic.frameworks.opf.metrics.MetricSpec.getLabel()</span></code></a>. The
value for each entry is a dictionary containing the value of the
metric as returned by
<a class="reference internal" href="metrics.html#nupic.frameworks.opf.metrics.MetricsIface.getMetric" title="nupic.frameworks.opf.metrics.MetricsIface.getMetric"><code class="xref py py-meth docutils literal"><span class="pre">nupic.frameworks.opf.metrics.MetricsIface.getMetric()</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord">
<code class="descname">handleInputRecord</code><span class="sig-paren">(</span><em>inputRecord</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the given record according to the current iteration cycle phase</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>inputRecord</strong> &#8211; (object) record expected to be returned from
<a class="reference internal" href="../data/index.html#nupic.data.record_stream.RecordStreamIface.getNextRecord" title="nupic.data.record_stream.RecordStreamIface.getNextRecord"><code class="xref py py-meth docutils literal"><span class="pre">nupic.data.record_stream.RecordStreamIface.getNextRecord()</span></code></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference internal" href="results.html#nupic.frameworks.opf.opf_utils.ModelResult" title="nupic.frameworks.opf.opf_utils.ModelResult"><code class="xref py py-class docutils literal"><span class="pre">nupic.frameworks.opf.opf_utils.ModelResult</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.replaceIterationCycle">
<code class="descname">replaceIterationCycle</code><span class="sig-paren">(</span><em>phaseSpecs</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.replaceIterationCycle" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces the Iteration Cycle phases</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>phaseSpecs</strong> &#8211; Iteration cycle description consisting of a sequence of
IterationPhaseSpecXXXXX elements that are performed in the
given order</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs initial setup activities, including &#8216;setup&#8217; callbacks. This
method MUST be called once before the first call to
<a class="reference internal" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord" title="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord"><code class="xref py py-meth docutils literal"><span class="pre">handleInputRecord()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nupic.frameworks.opf.opf_task_driver.IterationPhaseSpecLearnOnly">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_task_driver.</code><code class="descname">IterationPhaseSpecLearnOnly</code><span class="sig-paren">(</span><em>nIters</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.IterationPhaseSpecLearnOnly" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents the Learn-only phase of the Iteration Cycle in
the TaskControl block of description.py</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nIters</strong> &#8211; (int) iterations to remain in this phase. An iteration
corresponds to a single <a class="reference internal" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord" title="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord"><code class="xref py py-meth docutils literal"><span class="pre">OPFTaskDriver.handleInputRecord()</span></code></a>
call.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="nupic.frameworks.opf.opf_task_driver.IterationPhaseSpecInferOnly">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_task_driver.</code><code class="descname">IterationPhaseSpecInferOnly</code><span class="sig-paren">(</span><em>nIters</em>, <em>inferenceArgs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.IterationPhaseSpecInferOnly" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents the Infer-only phase of the Iteration Cycle in
the TaskControl block of description.py</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nIters</strong> &#8211; (int) Number of iterations to remain in this phase. An
iteration corresponds to a single
<a class="reference internal" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord" title="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord"><code class="xref py py-meth docutils literal"><span class="pre">OPFTaskDriver.handleInputRecord()</span></code></a> call.</li>
<li><strong>inferenceArgs</strong> &#8211; (dict) A dictionary of arguments required for inference.
These depend on the
<a class="reference internal" href="utils.html#nupic.frameworks.opf.opf_utils.InferenceType" title="nupic.frameworks.opf.opf_utils.InferenceType"><code class="xref py py-class docutils literal"><span class="pre">InferenceType</span></code></a> of the current
model.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="nupic.frameworks.opf.opf_task_driver.IterationPhaseSpecLearnAndInfer">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_task_driver.</code><code class="descname">IterationPhaseSpecLearnAndInfer</code><span class="sig-paren">(</span><em>nIters</em>, <em>inferenceArgs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_task_driver.IterationPhaseSpecLearnAndInfer" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents the Learn-and-Infer phase of the Iteration Cycle in
the TaskControl block of description.py</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nIters</strong> &#8211; (int) Number of iterations to remain in this phase. An
iteration corresponds to a single
<a class="reference internal" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord" title="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.handleInputRecord"><code class="xref py py-meth docutils literal"><span class="pre">OPFTaskDriver.handleInputRecord()</span></code></a> call.</li>
<li><strong>inferenceArgs</strong> &#8211; (dict) A dictionary of arguments required for inference.
These depend on the
<a class="reference internal" href="utils.html#nupic.frameworks.opf.opf_utils.InferenceType" title="nupic.frameworks.opf.opf_utils.InferenceType"><code class="xref py py-class docutils literal"><span class="pre">InferenceType</span></code></a> of the current
model.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-nupic.frameworks.opf.opf_environment">
<span id="opf-environment"></span><h2>OPF Environment<a class="headerlink" href="#module-nupic.frameworks.opf.opf_environment" title="Permalink to this headline">¶</a></h2>
<p>This file describes the interfaces for adapting
<a class="reference internal" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver" title="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver"><code class="xref py py-class docutils literal"><span class="pre">OPFTaskDriver</span></code></a> to specific
environments.</p>
<p>These interfaces encapsulate external specifics, such as
data source (e.g., .csv file or database, etc.), prediction sink (.csv file or
databse, etc.), report and serialization destination,  etc.</p>
<dl class="class">
<dt id="nupic.frameworks.opf.opf_environment.PredictionLoggerIface">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_environment.</code><code class="descname">PredictionLoggerIface</code><a class="headerlink" href="#nupic.frameworks.opf.opf_environment.PredictionLoggerIface" title="Permalink to this definition">¶</a></dt>
<dd><p>This class defines the interface for OPF prediction logger implementations.</p>
<dl class="method">
<dt id="nupic.frameworks.opf.opf_environment.PredictionLoggerIface.checkpoint">
<code class="descname">checkpoint</code><span class="sig-paren">(</span><em>checkpointSink</em>, <em>maxRows</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_environment.PredictionLoggerIface.checkpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a checkpoint of the prediction output stream. The checkpoint
comprises up to maxRows of the most recent inference records.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>checkpointSink</strong> &#8211; A File-like object where predictions checkpoint data,
if any, will be stored.</li>
<li><strong>maxRows</strong> &#8211; (int) Maximum number of most recent inference rows to
checkpoint.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_environment.PredictionLoggerIface.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_environment.PredictionLoggerIface.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes connect to output store and cleans up any resources associated
with writing.</p>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_environment.PredictionLoggerIface.setLoggedMetrics">
<code class="descname">setLoggedMetrics</code><span class="sig-paren">(</span><em>metricNames</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_environment.PredictionLoggerIface.setLoggedMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets which metrics should be written to the prediction log.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>metricNames</strong> &#8211; (list) metric names that match the labels of the
metrics that should be written to the prediction log</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_environment.PredictionLoggerIface.writeRecord">
<code class="descname">writeRecord</code><span class="sig-paren">(</span><em>modelResult</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_environment.PredictionLoggerIface.writeRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits a set of inputs data, inferences, and metrics from a model
resulting from a single record.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>modelResult</strong> &#8211; (<a class="reference internal" href="results.html#nupic.frameworks.opf.opf_utils.ModelResult" title="nupic.frameworks.opf.opf_utils.ModelResult"><code class="xref py py-class docutils literal"><span class="pre">nupic.frameworks.opf.opf_utils.ModelResult</span></code></a>)
contains the model input and output for the current timestep.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_environment.PredictionLoggerIface.writeRecords">
<code class="descname">writeRecords</code><span class="sig-paren">(</span><em>modelResults</em>, <em>progressCB=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_environment.PredictionLoggerIface.writeRecords" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#nupic.frameworks.opf.opf_environment.PredictionLoggerIface.writeRecord" title="nupic.frameworks.opf.opf_environment.PredictionLoggerIface.writeRecord"><code class="xref py py-meth docutils literal"><span class="pre">writeRecord()</span></code></a>, but emits multiple rows in one shot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>modelResults</strong> &#8211; (list) of
<a class="reference internal" href="results.html#nupic.frameworks.opf.opf_utils.ModelResult" title="nupic.frameworks.opf.opf_utils.ModelResult"><code class="xref py py-class docutils literal"><span class="pre">nupic.frameworks.opf.opf_utils.ModelResult</span></code></a> objects, each
represents one record.</li>
<li><strong>progressCB</strong> &#8211; (func) optional callback method that will be called after
each batch of records is written.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nupic.frameworks.opf.opf_basic_environment">
<span id="opf-basic-environment"></span><h2>OPF Basic Environment<a class="headerlink" href="#module-nupic.frameworks.opf.opf_basic_environment" title="Permalink to this headline">¶</a></h2>
<p>This script provides a file-based implementation of the <code class="docutils literal"><span class="pre">opf_environment</span></code>
interfaces (OPF).</p>
<p>This &#8220;basic&#8221; implementation of the interface (need a better name
instead of &#8220;basic&#8221;) uses files (.csv, etc.) versus Nupic&#8217;s implementation
that would use databases.</p>
<p>This implementation is used by research tools, such as
<code class="docutils literal"><span class="pre">scripts/run_opf_experiment.py</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">opf_environment</span></code> interfaces encapsulate external specifics, such as
data source (e.g., .csv file or database, etc.), prediction sink (.csv file or
databse, etc.), report and serialization destination,  etc.</p>
<dl class="class">
<dt id="nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_basic_environment.</code><code class="descname">PredictionMetricsLoggerIface</code><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the interface for output of prediction metrics.</p>
<dl class="method">
<dt id="nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface.emitFinalMetrics">
<code class="descname">emitFinalMetrics</code><span class="sig-paren">(</span><em>metrics</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface.emitFinalMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits final metrics.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the intention is that the final metrics may go to a different
place (e.g., csv file) versus <a class="reference internal" href="#nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface.emitPeriodicMetrics" title="nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface.emitPeriodicMetrics"><code class="xref py py-meth docutils literal"><span class="pre">emitPeriodicMetrics()</span></code></a>
(e.g., stdout)</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>metrics</strong> &#8211; A list of metrics as returned by
<a class="reference internal" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetrics" title="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetrics"><code class="xref py py-meth docutils literal"><span class="pre">nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetrics()</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface.emitPeriodicMetrics">
<code class="descname">emitPeriodicMetrics</code><span class="sig-paren">(</span><em>metrics</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface.emitPeriodicMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits periodic metrics to stdout in JSON.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>metrics</strong> &#8211; A list of metrics as returned by
<a class="reference internal" href="#nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetrics" title="nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetrics"><code class="xref py py-meth docutils literal"><span class="pre">nupic.frameworks.opf.opf_task_driver.OPFTaskDriver.getMetrics()</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_basic_environment.</code><code class="descname">DatasetReaderIface</code><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the interface class for a dataset readers</p>
<dl class="method">
<dt id="nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface.getDatasetFieldMetaData">
<code class="descname">getDatasetFieldMetaData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface.getDatasetFieldMetaData" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a tuple of dataset field metadata descriptors that are
arranged in the same order as the columns in the dataset.
Each field metadata descriptor is of type
<a class="reference internal" href="../data/index.html#nupic.data.field_meta.FieldMetaInfo" title="nupic.data.field_meta.FieldMetaInfo"><code class="xref py py-class docutils literal"><span class="pre">nupic.data.field_meta.FieldMetaInfo</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface.next">
<code class="descname">next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface.next" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The next record from the dataset.  The returned record object
is of the same structure as returned by
<a class="reference internal" href="../data/index.html#nupic.data.record_stream.RecordStreamIface.getNextRecord" title="nupic.data.record_stream.RecordStreamIface.getNextRecord"><code class="xref py py-meth docutils literal"><span class="pre">nupic.data.record_stream.RecordStreamIface.getNextRecord()</span></code></a>.
Returns <code class="docutils literal"><span class="pre">None</span></code> if the next record is not available yet.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">(StopIteration) if a hard &#8220;end of file&#8221; has been reached
and no more records will be forthcoming.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nupic.frameworks.opf.opf_basic_environment.BasicPredictionMetricsLogger">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_basic_environment.</code><code class="descname">BasicPredictionMetricsLogger</code><span class="sig-paren">(</span><em>experimentDir</em>, <em>label</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.BasicPredictionMetricsLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface" title="nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface"><code class="xref py py-class docutils literal"><span class="pre">nupic.frameworks.opf.opf_basic_environment.PredictionMetricsLoggerIface</span></code></a></p>
<p>This is the file-based implementation of the interface for output of
prediction metrics</p>
<p>TODO: where should periodic and final predictions go (versus stdout)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>experimentDir</strong> &#8211; (string) path to directory for experiment to run.</li>
<li><strong>label</strong> &#8211; (string) used to distinguish the output&#8217;s container (e.g.,
filename, directory name, property key, etc.).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="nupic.frameworks.opf.opf_basic_environment.BasicDatasetReader">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_basic_environment.</code><code class="descname">BasicDatasetReader</code><span class="sig-paren">(</span><em>streamDefDict</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.BasicDatasetReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface" title="nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface"><code class="xref py py-class docutils literal"><span class="pre">nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface</span></code></a></p>
<p>This is a CSV file-based implementation of <a class="reference internal" href="#nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface" title="nupic.frameworks.opf.opf_basic_environment.DatasetReaderIface"><code class="xref py py-class docutils literal"><span class="pre">DatasetReaderIface</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>streamDefDict</strong> &#8211; stream definition, as defined <a class="reference external" href="stream-def.html">here</a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="nupic.frameworks.opf.opf_basic_environment.NonTemporalPredictionLogAdapter">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_basic_environment.</code><code class="descname">NonTemporalPredictionLogAdapter</code><span class="sig-paren">(</span><em>writer</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.NonTemporalPredictionLogAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>This class serves as an adapter for a client-instantiated Non-temporal log
writer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>writer</strong> &#8211; (<code class="xref py py-class docutils literal"><span class="pre">PredictionWriterIface</span></code>) Non-temporal prediction log
writer</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="nupic.frameworks.opf.opf_basic_environment.NonTemporalPredictionLogAdapter.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>modelResult</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.NonTemporalPredictionLogAdapter.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Emit a input/prediction pair, if possible.</p>
<dl class="docutils">
<dt>modelResult:    An opf_utils.ModelResult object that contains the model input</dt>
<dd>and output for the current timestep.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nupic.frameworks.opf.opf_basic_environment.BasicPredictionLogger">
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_basic_environment.</code><code class="descname">BasicPredictionLogger</code><span class="sig-paren">(</span><em>fields</em>, <em>experimentDir</em>, <em>label</em>, <em>inferenceType</em>, <em>checkpointSource=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nupic.frameworks.opf.opf_basic_environment.BasicPredictionLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nupic.frameworks.opf.opf_environment.PredictionLoggerIface" title="nupic.frameworks.opf.opf_environment.PredictionLoggerIface"><code class="xref py py-class docutils literal"><span class="pre">nupic.frameworks.opf.opf_environment.PredictionLoggerIface</span></code></a></p>
<p>This class implements logging of predictions to files as actual vs
predicted values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fields</strong> &#8211; (list) of <a class="reference internal" href="../data/index.html#nupic.data.field_meta.FieldMetaInfo" title="nupic.data.field_meta.FieldMetaInfo"><code class="xref py py-class docutils literal"><span class="pre">nupic.data.field_meta.FieldMetaInfo</span></code></a> objects
representing the encoder-mapped data row field value sequences that
will be emitted to this prediction logger.</li>
<li><strong>experimentDir</strong> &#8211; (string) experiment directory path that contains
description.py</li>
<li><strong>label</strong> &#8211; (string) to incorporate into the filename.</li>
<li><strong>checkpointSource</strong> &#8211; If not None, a File-like object containing the
previously-checkpointed predictions for setting the initial contents of
this output stream.  Will be copied before returning, if
needed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">nupic.frameworks.opf.opf_basic_environment.</code><code class="descname">NonTemporalPredictionLogAdapter</code><span class="sig-paren">(</span><em>writer</em><span class="sig-paren">)</span></dt>
<dd><p>This class serves as an adapter for a client-instantiated Non-temporal log
writer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>writer</strong> &#8211; (<code class="xref py py-class docutils literal"><span class="pre">PredictionWriterIface</span></code>) Non-temporal prediction log
writer</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt>
<code class="descname">update</code><span class="sig-paren">(</span><em>modelResult</em><span class="sig-paren">)</span></dt>
<dd><p>Emit a input/prediction pair, if possible.</p>
<dl class="docutils">
<dt>modelResult:    An opf_utils.ModelResult object that contains the model input</dt>
<dd>and output for the current timestep.</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/numenta-logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">NuPIC</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=numenta&repo=nupic&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quick-start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/index.html">Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Online Prediction Framework</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="clients.html">Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="description-api.html">Description API</a></li>
<li class="toctree-l3"><a class="reference internal" href="exp-runner.html">Experiment Runner</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Environments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-nupic.frameworks.opf.opf_task_driver">OPF Task Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-nupic.frameworks.opf.opf_environment">OPF Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-nupic.frameworks.opf.opf_basic_environment">OPF Basic Environment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="results.html">Model Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html">Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Network API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/index.html">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/index.html">Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Numenta.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../_sources/api/opf/environment.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/numenta/nupic" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>